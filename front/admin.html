<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Wine API</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />
    <link rel=icon 
      href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/svgs/solid/martini-glass-citrus.svg>
  </head>
  <style>
    .bg-gris {
      background-color: #ccc;
    }
  </style>
  <body>
    
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container">
        
        <a class="navbar-brand" href="#">
          <i class="fa-solid fa-martini-glass-citrus me-4"></i>
          Wine API</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
              <li class="nav-item">
                <a class="nav-link "  href="index.html">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link active" href="#">Back Office</a>
              </li>
              
            </ul>
          </div>
      </div>
    </nav>
    <div class="container">
          <h1>Liste des vins</h1>
         <div class="row">
          <div class="col-4">

            <table class="table table-striped mt-4">
              <thead>
                <tr>
                  <th>Nom</th>
                  <th>Ann√©e</th>
                  <th>Prix</th>
                 
                </tr>
              </thead>
              <tbody id="tbody">
               

              

                
              </tbody>
            </table>
         
        
        </div>
        
        <!-- col4 -->
      </div>
      <!-- row -->
    </div>
    <footer class="py-5 bg-dark">
      <div class="container px-4 px-lg-5">
        <p class="m-0 text-center text-white">
          Copyright &copy; Seven Valley 2024
        </p>
      </div>
    </footer>
    <template id="ligne">
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td>
          <button class="btn btn-danger">
            <i class="fa fa-trash"></i>
          </button>
        </td>
      </tr>
    </template>
  </body>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script>
  
  
  const url = '../rest/personne/';
  

  
  async function go() {
      const response = await axios.get(url);
      let tableau = response.data;


      // slecteur sur la balise tbody
      const tbody = document.querySelector("#tbody");
      // sleceteur sur le template
      const template = document.querySelector("#ligne");
  
      for (let produit of tableau) {
        // je clone mon template
        const clone = template.content.cloneNode(true);
        let td = clone.querySelectorAll("td");
        td[0].textContent = produit.nom;
        td[1].textContent =produit.annee;
        td[2].textContent =produit.prix;
        //clone.querySelector(".btn-danger").setAttribute('data-id',perso.id);
        
        // on rajoute la balise tr ds le tbody
        tbody.appendChild(clone);
      }
      
    }
    go();
  
  </script>
</html>
